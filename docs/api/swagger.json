{"info":{"title":"AnyMessage API","version":"pre-release","description":"Backend services for AnyMessage.io and self-hosted options"},"host":"https://api.anymessage.io","basePath":"/","swagger":"2.0","paths":{"/conversation/list":{"get":{"summary":"Get list of all conversations for the current team/subdomain","tags":["conversation"],"responses":{"200":{"description":"Array of all conversations","schema":{"type":"array","items":{"type":"object","description":"IConversationsHistory (type)","properties":{"who":{"type":"number"},"type":{"type":"string"},"message":{"type":"string"},"timestamp":{"type":"number","format":"date-time"}}}}}}}},"/conversation/subscribe":{"get":{"summary":"SSE subscription for all new messages for a team","description":"requires team_url set in the user's cookies","tags":["conversation"],"produces":["text/event-stream"]}},"/conversation/add":{"post":{"summary":"Create/update a conversation","tags":["conversation"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"information about the message","schema":{"type":"object","properties":{"phoneNumber":{"type":"number","descrpition":"the number the user would like to send a message to"},"message":{"type":"string"},"provider":{"type":"string","description":"A string matching the name of a provider the user has access to"}}}}],"responses":{"200":{"description":"Responds with the updated conversation (array of message objects)"}}}},"/inbound":{"post":{"summary":"Receive messages from external providers/integrations and associate with team conversation(s)","description":"application/x-www-form-urlencoded","tags":["inbound"],"consumes":["application/x-www-form-urlencoded"],"parameters":[{"in":"path","name":"integration","required":true,"type":"string","description":"name of the integration (e.g. \"twilio\")"},{"in":"To","name":"To","type":"string","description":"Provider (number) to whom the message is being sent"},{"in":"From","name":"From","type":"string","description":"The (number) of the sender"},{"in":"Body","name":"Body","type":"string","description":"The message being sent"}],"responses":{"200":{"description":"Will vary by sender integration"}}}},"/integration/providers":{"get":{"summary":"Get list of providers for current subdomain/team","tags":["integration"],"responses":{"200":{"description":"Array of all providers","schema":{"type":"array","items":{"type":"string"}}}}}},"/integration/save":{"post":{"summary":"Create/update an integration","tags":["integration"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"An integration contains some authentication, a name, and an array of providers","schema":{"type":"object","properties":{"authentication":{"type":"object","properties":{"key":"string","description":"required keys varies by integration type"}},"name":{"type":"string"},"providers":{"type":"array","description":"A list of providers that this integration enables","items":{"type":"string"}}}}}],"responses":{"200":{"description":"Empty response if successful"}}}},"/integration":{"get":{"summary":"Get information for specific integration","tags":["integration"],"parameters":[{"in":"query","name":"name"}],"responses":{"200":{"description":"Varies by integration","schema":{"type":"object","items":{"type":"string"}}}}}},"/team/subscription":{"get":{"summary":"Get current subscription funding source","description":"Get team's funding source (Credit Card) for a subscription. Only available with STRIPE","tags":["team"],"responses":{"200":{"description":"See stripe docs for more detail on response https://stripe.com/docs/api/sources"}}},"post":{"summary":"Create or update a subscription","description":"Create/Update subscription. Only available with STRIPE","consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"Information about the subscription to update","schema":{"type":"object","properties":{"cus_id":{"type":"string"},"token":{"type":"string"},"team_url":{"type":"string"}},"example":{"cus_id":"cus_retrievedFromSubscriptionEndpoint","team_url":"example.anymessage.io","token":"tok_providedByStripeElements"}}}],"tags":["team"],"responses":{"200":{"description":"Empty response, if successful"}}}},"/team/url":{"get":{"summary":"Get user's team URL","tags":["team"],"responses":{"200":{"description":"Team URL or Empty String","schema":{"type":"object","properties":{"teamURL":{"type":"string","default":""}}}}}}},"/team/url/available":{"post":{"summary":"Check if a Team URL is available","tags":["team"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"Only include subdomain in request body","schema":{"type":"object","properties":{"newURL":{"type":"string"}},"example":{"newURL":"example"}}}],"responses":{"200":{"description":"Boolean if URL is available","schema":{"type":"object","properties":{"available":{"type":"boolean"}}}}}}},"/team/url/set":{"post":{"summary":"Set URL for a team","description":"Requires that URL is available and user has access to team","tags":["team"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"Only include subdomain in request body","schema":{"type":"object","properties":{"newURL":{"type":"string"}},"example":{"newURL":"example"}}}],"responses":{"200":{"description":"Redirect URL with new URL prefix","schema":{"type":"object","properties":{"redirectURI":{"type":"string","default":"//{subdomain}.UI_HOSTNAME/messages"}}}}}}},"/user/login":{"get":{"summary":"Login user","description":"Logs user into their team subdomain","tags":["user"],"responses":{"200":{"description":"User subdomain. If no subdomain exists, Setup URL","schema":{"type":"object","properties":{"redirectURI":{"type":"string","default":"//{subdomain}.UI_HOSTNAME/messages"}}}}}}},"/user/details":{"get":{"summary":"Get details for user","description":"Get a client-side copy of the user record","tags":["user"],"responses":{"200":{"description":"JSON of user record","schema":{"type":"object","properties":{"given_name":{"type":"string"},"family_name":{"type":"string"},"nickname":{"type":"string"},"name":{"type":"string"},"picture":{"type":"string","format":"uri"},"gender":{"type":"string"},"locale":{"type":"string","format":"iso2"},"updated_at":{"type":"string","format":"date-time"},"email":{"type":"string","format":"email"},"email_verified":{"type":"boolean"},"iss":{"type":"string","format":"uri"},"sub":{"type":"string","default":"oauth|sub"},"aud":{"type":"string","format":"hash"},"iat":{"type":"number","format":"date-time"},"exp":{"type":"number","format":"date-time"},"at_hash":{"type":"string","format":"hash"},"nonce":{"type":"string","format":"nonce"}}}}}}}},"definitions":{},"responses":{},"parameters":{},"securityDefinitions":{},"tags":[]}